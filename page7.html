<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–¶–µ–ø—å –ø–∏—Ç–∞–Ω–∏—è</title>
  <style>
    body {
      margin: 0;
      height: 100dvh;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #e5e7eb;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 12px;                /* –±—ã–ª–æ 20px */
      box-sizing: border-box;
      touch-action: pan-y;
    }
    h1 {
      margin: 12px 0 20px;          /* –±—ã–ª–æ 20px 0 30px */
      font-size: clamp(1.7rem, 4.8vw, 2.2rem);
      text-shadow: 0 0 20px #60a5fa88;
      text-align: center;
    }

    .footer {
      margin-top: 16px;             /* –±—ã–ª–æ 28px */
      font-size: 12px;
      opacity: 0.65;
    }

    .container {
      background: rgba(15, 23, 42, 0.75);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(96,165,250,0.3);
      border-radius: 24px;
      padding: 20px;                /* –±—ã–ª–æ 30px */
      width: 100%;
      max-width: 600px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      position: relative;
      overflow: hidden;
    }
    .target-chain {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;                    /* –±—ã–ª–æ 16px */
      min-height: 110px;
      padding: 16px;                /* –±—ã–ª–æ 20px */
      border: 2px dashed rgba(96,165,250,0.4);
      border-radius: 16px;
      margin-bottom: 20px;          /* –±—ã–ª–æ 30px */
      background: rgba(30,41,59,0.3);
    }
    .slot {
      width: 90px;                  /* –±—ã–ª–æ 110px */
      height: 90px;                 /* –±—ã–ª–æ 110px */
      border: 2px solid rgba(96,165,250,0.3);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(15,23,42,0.5);
      transition: all 0.3s ease;
      position: relative;
    }
    .slot.filled {
      border-color: #60a5fa;
      background: rgba(96,165,250,0.12);
      box-shadow: 0 0 20px rgba(96,165,250,0.3);
    }
    .slot::after {
      content: attr(data-order);
      position: absolute;
      top: -10px;
      right: -10px;
      background: #1e293b;
      color: #94a3b8;
      font-size: 0.8rem;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #475569;
    }
    .components {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;                    /* –±—ã–ª–æ 16px */
      margin-bottom: 24px;          /* –±—ã–ª–æ 40px */
    }
    .component {
      width: 78px;                  /* –±—ã–ª–æ 100px */
      height: 78px;                 /* –±—ã–ª–æ 100px */
      background: rgba(30,41,59,0.6);
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: grab;
      user-select: none;
      transition: all 0.25s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
      font-size: 1.9rem;            /* –±—ã–ª–æ 2.2rem */
      touch-action: manipulation;
      position: relative;               /* –≤–∞–∂–Ω–æ! */
      -webkit-user-select: none;
      user-select: none;
    }
    .component:active {
      cursor: grabbing;
      transform: scale(1.08);
      box-shadow: 0 12px 30px rgba(96,165,250,0.4);
    }
 .component-name {
  font-size: clamp(0.68rem, 2.1vw, 0.73rem);
  line-height: 1.05;
  margin-top: 2px;
  padding: 0 4px;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;       /* –º–∞–∫—Å–∏–º—É–º 2 —Å—Ç—Ä–æ–∫–∏ */
  -webkit-box-orient: vertical;
  text-overflow: ellipsis;
}
    .hint-text {
  text-align: center;
  margin: 0 0 20px;
  font-size: clamp(0.9rem, 3.5vw, 1rem);
  color: #94a3b8;
  opacity: 0.85;
  letter-spacing: 0.4px;
  user-select: none;
  pointer-events: none;
}

.hint-text .pulse {
  display: inline-block;
  color: #60a5fa;
  font-weight: 600;
  animation: gentlePulse 2.2s ease-in-out infinite;
}

@keyframes gentlePulse {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50%      { opacity: 1;   transform: scale(1.08); }
}
    .success-line {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, transparent, #34d399, #10b981, #34d399, transparent);
      transform: translateY(-50%);
      opacity: 0;
      transition: opacity 1.5s;
      box-shadow: 0 0 30px #34d399;
      pointer-events: none;
    }
    .success-line.active {
      opacity: 0.8;
      animation: flow 3s linear infinite;
    }
    @keyframes flow {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    .answer {
      margin-top: 20px;             /* –±—ã–ª–æ 40px */
      font-size: 2.6rem;            /* –±—ã–ª–æ 3.5rem ‚Äî —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ */
      font-weight: 900;
      color: #34d399;
      text-shadow: 0 0 40px #34d399, 0 0 80px #059669;
      opacity: 0;
      transform: translateY(30px);
      transition: all 1.5s ease;
      line-height: 1;
    }
    .answer.show {
      opacity: 1;
      transform: translateY(0);
      animation: pulseText 2.5s ease-in-out infinite alternate;
    }
    .hold-progress {
      position: absolute;
      inset: -6px;                      /* —á—É—Ç—å –±–æ–ª—å—à–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
      border: 3px solid rgba(96,165,250,0.0);  /* –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
      border-radius: 50%;
      pointer-events: none;
      transition: border-color 0.1s;
      box-sizing: border-box;
      opacity: 0;
      transform: scale(0.8);
    }
    .component.hold-active .hold-progress {
      opacity: 1;
      animation: holdFill 0.3s linear forwards;  /* 600 –º—Å ‚Äî –ø–æ–¥—Å—Ç—Ä–æ–π –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É */
    }
    @keyframes pulseText {
      0% { text-shadow: 0 0 30px #34d399; }
      100% { text-shadow: 0 0 60px #34d399, 0 0 100px #059669; }
    }
    @keyframes holdFill {
    0% {
      border-color: rgba(96,165,250,0.2);
      transform: scale(0.8);
    }
    100% {
      border-color: #60a5fa;
      transform: scale(1.15);
    }

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-8px); }
  60% { transform: translateY(-4px); }
}
  }
  </style>
</head>
<body>
<h1>–ü—Ä–æ–≤–µ–¥–∏ –ø–∏—Ç–∞–Ω–∏–µ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—é (–º–∏–Ω–∏–º—É–º –Ω—É–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤).</h1>
<div class="container">
  <div class="target-chain" id="targetChain">
    <div class="slot" data-order="1" data-expected="panel"></div>
    <div class="slot" data-order="2" data-expected="battery"></div>
    <div class="slot" data-order="3" data-expected="inverter"></div>
    <div class="slot" data-order="4" data-expected="pred"></div>
    <div class="slot" data-order="5" data-expected="load"></div>
  </div>
  <div class="hint-text">
  –£–¥–µ—Ä–∂–∏–≤–∞–π —ç–ª–µ–º–µ–Ω—Ç <span class="pulse">–ø–∞–ª—å—Ü–µ–º</span>, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å
  </div>
  <div class="success-line" id="successLine"></div>
  <div class="components" id="components">
    <div class="component" draggable="true" data-type="load">
      <div class="hold-progress"></div>  <!-- –Ω–æ–≤—ã–π –∫—Ä—É–≥ -->
      <span>üè†</span>
      <div class="component-name">–ë—ã—Ç–æ–≤—ã–µ –ø—Ä–∏–±–æ—Ä—ã</div>
    </div>
    <div class="component" draggable="true" data-type="battery">
      <div class="hold-progress"></div>  <!-- –Ω–æ–≤—ã–π –∫—Ä—É–≥ -->
      <span>üîã</span>
      <div class="component-name">–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä</div>
    </div>
    <div class="component" draggable="true" data-type="inverter">
      <div class="hold-progress"></div>  <!-- –Ω–æ–≤—ã–π –∫—Ä—É–≥ -->
      <span>‚ö°</span>
      <div class="component-name">–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ–∫–∞</div>
    </div>
    <div class="component" draggable="true" data-type="panel">
      <div class="hold-progress"></div>  <!-- –Ω–æ–≤—ã–π –∫—Ä—É–≥ -->
      <span>‚òÄÔ∏è</span>
      <div class="component-name">–°–æ–ª–Ω–µ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å</div>
    </div>
    <div class="component" draggable="true" data-type="pred">
      <div class="hold-progress"></div>  <!-- –Ω–æ–≤—ã–π –∫—Ä—É–≥ -->
      <span>üîå</span>
      <div class="component-name">–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å</div>
    </div>
    <div class="component" draggable="true" data-type="counter">
      <div class="hold-progress"></div>  <!-- –Ω–æ–≤—ã–π –∫—Ä—É–≥ -->
      <span>üìä</span>
      <div class="component-name">–°—á—ë—Ç—á–∏–∫</div>
    </div>
  </div>
  <div class="answer" id="answer">–¶–ï–ü–¨</div>
  <div class="footer">¬∑ –†–û–ë–û–°–ò–ë ¬∑ 2026</div>
</div>

<script>
  // —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  const components = document.querySelectorAll('.component');
  const slots = document.querySelectorAll('.slot');
  const successLine = document.getElementById('successLine');
  const answer = document.getElementById('answer');
  const correctOrder = ['panel', 'battery', 'inverter', 'pred', 'load'];

  components.forEach(comp => {
    comp.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', comp.dataset.type);
      comp.style.opacity = '0.6';
    });
    comp.addEventListener('dragend', () => {
      comp.style.opacity = '1';
    });
  });

  slots.forEach(slot => {
    slot.addEventListener('dragover', e => {
      e.preventDefault();
      slot.style.background = 'rgba(96,165,250,0.2)';
    });
    slot.addEventListener('dragleave', () => {
      slot.style.background = 'rgba(15,23,42,0.5)';
    });
    slot.addEventListener('drop', e => {
      e.preventDefault();
      const type = e.dataTransfer.getData('text/plain');
      const existing = slot.querySelector('.component');
      if (existing) {
        document.getElementById('components').appendChild(existing);
      }
      const dragged = document.querySelector(`[data-type="${type}"]`);
      slot.innerHTML = '';
      slot.appendChild(dragged);
      slot.style.background = 'rgba(15,23,42,0.5)';
      dragged.style.opacity = '1';
      checkChain();
    });
  });
  let holdTimer;
  components.forEach(comp => {  
    comp.addEventListener('touchstart', (e) => {
      // –µ—Å–ª–∏ —É–∂–µ —Ç–∞—â–∏–º ‚Äî –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å
      if (comp.style.opacity === '0.6') return;

      comp.classList.add('hold-active');

      holdTimer = setTimeout(() => {
        // –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º ‚Äî –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –Ω–∞—á–Ω—ë—Ç drag –ø–æ—Å–ª–µ long-press
      }, 800);  // –ø—Ä–æ—Å—Ç–æ –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏–∏, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å
    }, { passive: true });

    comp.addEventListener('touchend', () => {
      clearTimeout(holdTimer);
      comp.classList.remove('hold-active');
    });

    comp.addEventListener('touchmove', () => {
      clearTimeout(holdTimer);
      comp.classList.remove('hold-active');
    });
  });

  function checkChain() {
    const filledSlots = Array.from(slots).map(slot => {
      const comp = slot.querySelector('.component');
      return comp ? comp.dataset.type : null;
    });
    const isCorrect = filledSlots.every((type, i) => type === correctOrder[i]);
    if (isCorrect) {
      successLine.classList.add('active');
      answer.classList.add('show');
    } else {
      successLine.classList.remove('active');
    }
  }
  
</script>
</div>
</body>
</html>
