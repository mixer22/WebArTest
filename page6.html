<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Батарейка</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #e5e7eb;
    overflow: hidden;
    position: relative;
  }

  /* Фоновые частицы энергии / ветер */
  .particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .particle {
    position: absolute;
    background: #34d399;
    border-radius: 50%;
    opacity: 0;
    animation: windParticle 8s linear infinite;
    box-shadow: 0 0 10px #34d399;
  }

  @keyframes windParticle {
    0%   { transform: translateY(100vh) scale(0.2); opacity: 0; }
    10%  { opacity: 0.6; }
    90%  { opacity: 0.6; }
    100% { transform: translateY(-20vh) scale(0.5); opacity: 0; }
  }

  h1 {
    margin-bottom: 30px;
    font-size: 2.2rem;
    text-shadow: 0 0 15px #34d39988;
    z-index: 2;
  }

  /* Ветряк */
  .windmill {
    width: 180px;
    height: 180px;
    position: relative;
    margin-bottom: 40px;
    touch-action: none;
    z-index: 2;
  }

  .windmill svg {
    width: 100%;
    height: 100%;
    user-select: none;
    transform-origin: 50% 80%; /* центр вращения ниже — реалистично */
  }

  /* Батарейка */
  .battery-container {
    width: 100px;
    height: 200px;
    border: 5px solid #94a3b8;
    border-radius: 18px;
    position: relative;
    overflow: hidden;
    background: #1e293b;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6),
                inset 0 0 20px rgba(52,211,153,0.15);
    margin-bottom: 40px;
    z-index: 2;
  }

  .battery-fill {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 0%;
    background: linear-gradient(to top, #059669, #34d399, #a7f3d0);
    transition: height 0.4s ease;
    box-shadow: 0 0 25px #34d39988 inset;
  }

  .battery-tip {
    position: absolute;
    top: -14px;
    left: 30%;
    width: 40%;
    height: 14px;
    background: #94a3b8;
    border-radius: 6px 6px 0 0;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  }

  .battery-label {
    position: absolute;
    bottom: -28px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.1rem;
    color: #94a3b8;
    text-shadow: 0 0 8px #34d39944;
  }

  /* Слово-ответ */
  .answer {
    font-size: 3.2rem;
    font-weight: 900;
    color: #34d399;
    text-shadow: 0 0 30px #34d399, 0 0 60px #059669;
    opacity: 0;
    transform: translateY(30px);
    transition: all 1s ease;
    z-index: 2;
  }

  .answer.show {
    opacity: 1;
    transform: translateY(0);
    animation: glowText 2s ease-in-out infinite alternate;
  }

  @keyframes glowText {
    0% { text-shadow: 0 0 20px #34d399, 0 0 40px #059669; }
    100% { text-shadow: 0 0 40px #34d399, 0 0 80px #059669; }
  }
</style>
</head>
<body>

<div class="particles" id="particles"></div>

<h1>⚡ Заряди батарейку ветром!</h1>

<div class="windmill" id="windmill">
  <svg viewBox="0 0 100 140">
    <rect x="46" y="90" width="8" height="50" fill="#4b5563" rx="2"/>
    <g id="blades" transform="rotate(0 50 50)">
      <path d="M50,50 L35,5 Q30,0 25,10 L40,50 Z" fill="url(#bladeGrad)" stroke="#cbd5e1" stroke-width="1.5"/>
      <path d="M50,50 L95,35 Q100,30 90,25 L50,40 Z" fill="url(#bladeGrad)" stroke="#cbd5e1" stroke-width="1.5" transform="rotate(120 50 50)"/>
      <path d="M50,50 L65,95 Q70,100 75,90 L50,60 Z" fill="url(#bladeGrad)" stroke="#cbd5e1" stroke-width="1.5" transform="rotate(240 50 50)"/>
      <circle cx="50" cy="50" r="8" fill="#1e293b" stroke="#94a3b8" stroke-width="2"/>
    </g>
    <defs>
      <linearGradient id="bladeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#e5e7eb"/>
        <stop offset="100%" stop-color="#cbd5e1"/>
      </linearGradient>
    </defs>
  </svg>
</div>

<div class="battery-container">
  <div class="battery-fill" id="batteryFill"></div>
  <div class="battery-tip"></div>
  <div class="battery-label">Заряд</div>
</div>

<div class="answer" id="answer">ЭНЕРГИЯ</div>

<script>
// Частицы ветра/энергии
const particlesContainer = document.getElementById('particles');
for (let i = 0; i < 30; i++) {
  const p = document.createElement('div');
  p.className = 'particle';
  const size = Math.random() * 4 + 2;
  p.style.width = p.style.height = size + 'px';
  p.style.left = Math.random() * 100 + '%';
  p.style.top = Math.random() * 100 + 'vh';
  p.style.animationDelay = Math.random() * 10 + 's';
  p.style.animationDuration = (6 + Math.random() * 8) + 's';
  particlesContainer.appendChild(p);
}

const fill = document.getElementById("batteryFill");
const answer = document.getElementById("answer");
const windmill = document.getElementById("windmill");
const blades = document.getElementById("blades");
let charge = 0;
let rotation = 0;
let lastAngle = null;

function increaseCharge(amount) {
  charge += amount * 1.5; // чуть быстрее заряд
  if (charge > 100) charge = 100;
  fill.style.height = charge + "%";
  if (charge >= 100) {
    answer.classList.add("show");
  }
}

function getAngle(x, y, cx, cy) {
  return Math.atan2(y - cy, x - cx) * (180 / Math.PI);
}

function startDrag(e) {
  const rect = windmill.getBoundingClientRect();
  const cx = rect.left + rect.width / 2;
  const cy = rect.top + rect.height / 2;
  function onMove(ev) {
    const clientX = ev.touches ? ev.touches[0].clientX : ev.clientX;
    const clientY = ev.touches ? ev.touches[0].clientY : ev.clientY;
    const angle = getAngle(clientX, clientY, cx, cy);
    if (lastAngle !== null) {
      let delta = angle - lastAngle;
      if (delta > 180) delta -= 360;
      if (delta < -180) delta += 360;
      rotation += delta;
      blades.setAttribute("transform", `rotate(${rotation} 50 50)`);
      increaseCharge(Math.abs(delta) * 0.003);
    }
    lastAngle = angle;
  }
  function endDrag() {
    lastAngle = null;
    window.removeEventListener("mousemove", onMove);
    window.removeEventListener("mouseup", endDrag);
    window.removeEventListener("touchmove", onMove);
    window.removeEventListener("touchend", endDrag);
  }
  window.addEventListener("mousemove", onMove);
  window.addEventListener("mouseup", endDrag);
  window.addEventListener("touchmove", onMove);
  window.addEventListener("touchend", endDrag);
  e.preventDefault();
}

windmill.addEventListener("mousedown", startDrag);
windmill.addEventListener("touchstart", startDrag);
</script>
</body>
</html>
